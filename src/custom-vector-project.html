<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Vector Implementation - Owen Jones</title>
    <link rel="stylesheet" href="./styles/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <a href="/" class="logo">Owen Jones</a>
            <nav>
                <a href="/">Home</a>
                <a href="/about">About</a>
                <a href="/projects">Projects</a>
                <a href="/contact">Contact</a>
            </nav>
        </header>

        <main>
            <article class="project-article">
                <div class="project-header-large">
                    <div class="header-content">
                        <div class="project-image">
                            <img src="./assets/custom-vector.jpeg" alt="Custom Vector Implementation">
                        </div>
                        <h1>Custom Vector Implementation</h1>
                        <div class="project-meta">
                            <span class="status-badge active">In Progress</span>
                            <div class="tech-stack">
                                <span class="tech-tag">Rust</span>
                                <span class="tech-tag">Memory Management</span>
                                <span class="tech-tag">Data Structures</span>
                                <span class="tech-tag">Systems Programming</span>
                            </div>
                        </div>
                    </div>
                </div>

                <section class="project-section">
                    <h2>Project Overview</h2>
                    <p>A low-level implementation of Rust's vector type, focusing on memory management, safety guarantees, and performance optimization. This project serves as a deep dive into systems programming concepts, demonstrating advanced memory management techniques and iterator implementations in Rust.</p>
                </section>

                <section class="project-section">
                    <h2>Project Background</h2>
                    <p>This project was initiated to gain a deeper understanding of Rust's memory management model and systems programming concepts. By implementing a fundamental data structure from scratch, it provides hands-on experience with unsafe Rust, memory allocation, and performance optimization techniques.</p>
                    
                    <div class="architecture-component">
                        <h3>Learning Objectives</h3>
                        <ul class="feature-list">
                            <li>Deep understanding of Rust's memory management</li>
                            <li>Experience with unsafe Rust and raw pointers</li>
                            <li>Implementation of growth strategies and performance optimization</li>
                            <li>Practice with generic programming and trait implementations</li>
                        </ul>
                    </div>

                    <div class="architecture-component">
                        <h3>Key Features</h3>
                        <ul class="feature-list">
                            <li>Custom memory allocator with growth optimization</li>
                            <li>Comprehensive iterator implementations</li>
                            <li>Zero-sized type optimization</li>
                            <li>Safe memory management with proper null pointer handling</li>
                            <li>Efficient element movement operations</li>
                        </ul>
                    </div>
                </section>

                <section class="project-section">
                    <h2>Implementation Status</h2>
                    <div class="status-summary">
                        <p>The project has completed its core functionality and iterator implementations, currently focusing on performance optimizations. Current progress includes:</p>
                        
                        <div class="architecture-component">
                            <h3>Completed Features âœ…</h3>
                            <ul class="feature-list">
                                <li>Core memory management functionality</li>
                                <li>Safe pointer handling and allocation</li>
                                <li>Comprehensive iterator support</li>
                                <li>Memory safety test suite</li>
                                <li>Zero-sized type handling</li>
                            </ul>
                        </div>

                        <div class="architecture-component">
                            <h3>In Progress ðŸš§</h3>
                            <ul class="feature-list">
                                <li>Small vector optimization</li>
                                <li>Growth strategy refinement</li>
                                <li>SIMD acceleration for bulk operations</li>
                                <li>Performance benchmarking suite</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <section class="project-section">
                    <h2>Technical Implementation</h2>
                    
                    <div class="code-examples">
                        <div class="code-snippet">
                            <h3>Core Memory Management</h3>
                            <pre><code class="language-rust">pub struct RawVec<T> {
    ptr: *mut T,      // Raw pointer to heap memory
    cap: usize,       // Total allocated capacity
}

impl<T> RawVec<T> {
    pub fn with_capacity(capacity: usize) -> Self {
        // Handle zero-sized types
        if std::mem::size_of::<T>() == 0 {
            return RawVec {
                ptr: std::ptr::NonNull::dangling().as_ptr(),
                cap: usize::MAX,
            };
        }
        
        let layout = Layout::array::<T>(capacity)
            .expect("Failed to create layout");
        
        let ptr = unsafe { 
            alloc::alloc(layout) as *mut T 
        };
        
        if ptr.is_null() {
            alloc::handle_alloc_error(layout);
        }
        
        RawVec { ptr, cap: capacity }
    }
}</code></pre>
                        </div>

                        <div class="code-snippet">
                            <h3>Iterator Implementation</h3>
                            <pre><code class="language-rust">pub struct IntoIter<T> {
    buf: RawVec<T>,
    start: usize,
    end: usize,
}

impl<T> Iterator for IntoIter<T> {
    type Item = T;
    
    fn next(&mut self) -> Option<T> {
        if self.start == self.end {
            None
        } else {
            let result = self.buf.read_at(self.start);
            self.start += 1;
            Some(result)
        }
    }
}

impl<T> DoubleEndedIterator for IntoIter<T> {
    fn next_back(&mut self) -> Option<T> {
        if self.start == self.end {
            None
        } else {
            self.end -= 1;
            Some(self.buf.read_at(self.end))
        }
    }
}</code></pre>
                        </div>

                        <div class="code-snippet">
                            <h3>Memory Safety</h3>
                            <pre><code class="language-rust">impl<T> Drop for RawVec<T> {
    fn drop(&mut self) {
        if self.cap != 0 && std::mem::size_of::<T>() != 0 {
            unsafe {
                let layout = Layout::array::<T>(self.cap)
                    .expect("Failed to create layout");
                alloc::dealloc(
                    self.ptr as *mut u8,
                    layout
                );
            }
        }
    }
}</code></pre>
                        </div>
                    </div>
                </section>

                <section class="project-section">
                    <h2>Next Steps</h2>
                    <div class="architecture-component">
                        <h3>Planned Improvements</h3>
                        <ul class="feature-list">
                            <li>Implementation of small vector optimization</li>
                            <li>SIMD acceleration for bulk operations</li>
                            <li>Advanced growth strategy optimization</li>
                            <li>Comprehensive benchmarking suite</li>
                            <li>Performance comparison with std::vec::Vec</li>
                        </ul>
                    </div>
                </section>

                <section class="project-section">
                    <h2>Learning Resources</h2>
                    <div class="resource-links">
                        <h3>Documentation</h3>
                        <ul class="feature-list">
                            <li><a href="/https://doc.rust-lang.org/std/vec/struct.Vec">Rust Documentation - Vec</a></li>
                            <li><a href="/https://doc.rust-lang.org/nomicon/vec">Rustonomicon - Implementing Vec</a></li>
                            <li><a href="/https://doc.rust-lang.org/std/alloc/index">Rust Reference - Allocator API</a></li>
                        </ul>
                    </div>
                </section>

                <div class="project-links">
                    <a href="https://github.com/objones25/custom_vector_objones25" class="github-link" target="_blank">View on GitHub â†’</a>
                </div>
            </article>
        </main>

        <footer>
            Â© 2024 Owen Jones. All rights reserved.
        </footer>
    </div>
    <script type="module" src="./js/script.js"></script></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-rust.min.js"></script>
</body>
</html> 